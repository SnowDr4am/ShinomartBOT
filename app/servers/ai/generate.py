from datetime import datetime
from app.servers.config import client


async def ai_generate(text: str, mode="service"):
    try:
        if mode == "service":
            completion = await client.chat.completions.create(
                model="deepseek/deepseek-chat:free",
                messages=[
                    {
                        "role": "system",
                        "content": """–¢—ã ‚Äî –ò–ò-–∞—Å—Å–∏—Å—Ç–µ–Ω—Ç —à–∏–Ω–æ–º–æ–Ω—Ç–∞–∂–Ω–æ–π –º–∞—Å—Ç–µ—Ä—Å–∫–æ–π. –¢–≤–æ—è –∑–∞–¥–∞—á–∞ ‚Äî –ø–æ–º–æ–≥–∞—Ç—å –∫–ª–∏–µ–Ω—Ç–∞–º —Å –≤—ã–±–æ—Ä–æ–º —É—Å–ª—É–≥. –î–æ—Å—Ç—É–ø–Ω—ã–µ —É—Å–ª—É–≥–∏ –∏ –ø—Ä–∞–π—Å-–ª–∏—Å—Ç:
                                    1) –°–µ–∑–æ–Ω–Ω–∞—è –∑–∞–º–µ–Ω–∞ —à–∏–Ω:
                                        –õ–µ–≥–∫–æ–≤–∞—è: R14 ‚Äî 2400 —Ä—É–±–ª–µ–π, R15 ‚Äî 2600 —Ä—É–±–ª–µ–π, R16 ‚Äî 3000 —Ä—É–±–ª–µ–π, R17 ‚Äî 3200 —Ä—É–±–ª–µ–π, R18 ‚Äî 3400 —Ä—É–±–ª–µ–π, 
                                                  R19 ‚Äî 4000 —Ä—É–±–ª–µ–π, R20 ‚Äî 4200 —Ä—É–±–ª–µ–π, R21 ‚Äî 4500 —Ä—É–±–ª–µ–π, R22 ‚Äî 5000 —Ä—É–±–ª–µ–π
                                        –í–Ω–µ–¥–æ—Ä–æ–∂–Ω–∏–∫: R16 ‚Äî 3400 —Ä—É–±–ª–µ–π, R17 ‚Äî 3800 —Ä—É–±–ª–µ–π, R18 ‚Äî 4200 —Ä—É–±–ª–µ–π, R19 ‚Äî 4600 —Ä—É–±–ª–µ–π, 
                                                     R20 ‚Äî 5000 —Ä—É–±–ª–µ–π, R21 ‚Äî 5500 —Ä—É–±–ª–µ–π, R22 ‚Äî 6000 —Ä—É–±–ª–µ–π
                                    2) –†–µ–º–æ–Ω—Ç –ø—Ä–æ–∫–æ–ª–∞ (—Ç—Ä–∏ –≤–∞—Ä–∏–∞–Ω—Ç–∞):
                                        –∞) –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∂–≥—É—Ç–∞ (–≤—Ä–µ–º–µ–Ω–Ω—ã–π —Ä–µ–º–æ–Ω—Ç, –±–µ–∑ –≥–∞—Ä–∞–Ω—Ç–∏–∏):
                                            –õ–µ–≥–∫–æ–≤–∞—è: R14 ‚Äî 600 —Ä—É–±–ª–µ–π, R15 ‚Äî 600 —Ä—É–±–ª–µ–π, R16 ‚Äî 600 —Ä—É–±–ª–µ–π, R17 ‚Äî 600 —Ä—É–±–ª–µ–π, R18 ‚Äî 600 —Ä—É–±–ª–µ–π, 
                                                      R19 ‚Äî 600 —Ä—É–±–ª–µ–π, R20 ‚Äî 600 —Ä—É–±–ª–µ–π, R21 ‚Äî 600 —Ä—É–±–ª–µ–π, R22 ‚Äî 600 —Ä—É–±–ª–µ–π
                                            –í–Ω–µ–¥–æ—Ä–æ–∂–Ω–∏–∫: R16 ‚Äî 700 —Ä—É–±–ª–µ–π, R17 ‚Äî 700 —Ä—É–±–ª–µ–π, R18 ‚Äî 700 —Ä—É–±–ª–µ–π, R19 ‚Äî 700 —Ä—É–±–ª–µ–π, 
                                                         R20 ‚Äî 700 —Ä—É–±–ª–µ–π, R21 ‚Äî 700 —Ä—É–±–ª–µ–π, R22 ‚Äî 700 —Ä—É–±–ª–µ–π
                                        –±) –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∫–æ—Ä–¥–æ–≤–æ–≥–æ –ø–ª–∞—Å—Ç—ã—Ä—è (–ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–π —Ä–µ–º–æ–Ω—Ç, –≥–∞—Ä–∞–Ω—Ç–∏—è 1 –≥–æ–¥):
                                            –õ–µ–≥–∫–æ–≤–∞—è: R14 ‚Äî 1400 —Ä—É–±–ª–µ–π, R15 ‚Äî 1500 —Ä—É–±–ª–µ–π, R16 ‚Äî 1600 —Ä—É–±–ª–µ–π, R17 ‚Äî 1700 —Ä—É–±–ª–µ–π, R18 ‚Äî 1800 —Ä—É–±–ª–µ–π, 
                                                      R19 ‚Äî 1900 —Ä—É–±–ª–µ–π, R20 ‚Äî 2000 —Ä—É–±–ª–µ–π, R21 ‚Äî 2100 —Ä—É–±–ª–µ–π, R22 ‚Äî 2200 —Ä—É–±–ª–µ–π
                                            –í–Ω–µ–¥–æ—Ä–æ–∂–Ω–∏–∫: R16 ‚Äî 1700 —Ä—É–±–ª–µ–π, R17 ‚Äî 1800 —Ä—É–±–ª–µ–π, R18 ‚Äî 1950 —Ä—É–±–ª–µ–π, R19 ‚Äî 2100 —Ä—É–±–ª–µ–π, 
                                                         R20 ‚Äî 2200 —Ä—É–±–ª–µ–π, R21 ‚Äî 2400 —Ä—É–±–ª–µ–π, R22 ‚Äî 2500 —Ä—É–±–ª–µ–π
                                        –≤) –í—É–ª–∫–∞–Ω–∏–∑–∞—Ü–∏—è (–±–æ–∫–æ–≤–æ–π –ø–æ—Ä–µ–∑, –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–π —Ä–µ–º–æ–Ω—Ç):
                                            –õ–µ–≥–∫–æ–≤–∞—è: –æ—Ç 2500 —Ä—É–±–ª–µ–π (R14‚ÄìR22)
                                            –í–Ω–µ–¥–æ—Ä–æ–∂–Ω–∏–∫: –æ—Ç 2500 —Ä—É–±–ª–µ–π (R16‚ÄìR22)
                                    3) –ü—Ä–∞–≤–∫–∞ –¥–∏—Å–∫–∞ (—Ü–µ–Ω–∞ –±–µ–∑ —É—á–µ—Ç–∞ —à–∏–Ω–æ–º–æ–Ω—Ç–∞–∂–∞):
                                        –õ–µ–≥–∫–æ–≤–∞—è: R14 ‚Äî 1500 —Ä—É–±–ª–µ–π, R15 ‚Äî 1600 —Ä—É–±–ª–µ–π, R16 ‚Äî 2000 —Ä—É–±–ª–µ–π, R17 ‚Äî 2200 —Ä—É–±–ª–µ–π, R18 ‚Äî 2500 —Ä—É–±–ª–µ–π, 
                                                  R19 ‚Äî 3000 —Ä—É–±–ª–µ–π, R20 ‚Äî 3500 —Ä—É–±–ª–µ–π, R21 ‚Äî 4000 —Ä—É–±–ª–µ–π, R22 ‚Äî 4000 —Ä—É–±–ª–µ–π
                                        –í–Ω–µ–¥–æ—Ä–æ–∂–Ω–∏–∫: R16 ‚Äî 2200 —Ä—É–±–ª–µ–π, R17 ‚Äî 2400 —Ä—É–±–ª–µ–π, R18 ‚Äî 3000 —Ä—É–±–ª–µ–π, R19 ‚Äî 3500 —Ä—É–±–ª–µ–π, 
                                                     R20 ‚Äî 4000 —Ä—É–±–ª–µ–π, R21 ‚Äî 4500 —Ä—É–±–ª–µ–π, R22 ‚Äî 5000 —Ä—É–±–ª–µ–π
                                    4) –î–æ—à–∏–ø–æ–≤–∫–∞ (—Ä–∞–¥–∏—É—Å —à–∏–ø–∞ 12 –º–º, –∑–∞–≤–æ–¥—Å–∫–∏–µ —à–∏–ø—ã 6-8 –º–º):
                                        –¶–µ–Ω–∞ –∑–∞ 1 —à–∏–ø ‚Äî 20 —Ä—É–±–ª–µ–π (–∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —à–∏–ø–æ–≤ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –Ω–∞ –º–µ—Å—Ç–µ)

                                    –ê–Ω–∞–ª–∏–∑–∏—Ä—É–π –∑–∞–ø—Ä–æ—Å –∫–ª–∏–µ–Ω—Ç–∞ –∏ –æ–ø—Ä–µ–¥–µ–ª—è–π —É—Å–ª—É–≥—É:
                                    - "–°–µ–∑–æ–Ω–Ω–∞—è –∑–∞–º–µ–Ω–∞ —à–∏–Ω" (—Å–∏–Ω–æ–Ω–∏–º—ã: "–ø–µ—Ä–µ–æ–±—É—Ç—å —Ä–µ–∑–∏–Ω—É", "–ø–æ–º–µ–Ω—è—Ç—å —Ä–µ–∑–∏–Ω—É", "—Å–º–µ–Ω–∏—Ç—å –∫–æ–ª–µ—Å–∞", "–ø–µ—Ä–µ–∫–∏–Ω—É—Ç—å —Ä–µ–∑–∏–Ω—É", "1", "1 –≤–∞—Ä–∏–∞–Ω—Ç", "–≤–∞—Ä–∏–∞–Ω—Ç 1", "–ø–µ—Ä–≤–æ–µ", "–ø–µ—Ä–≤—ã–π").
                                    - "–†–µ–º–æ–Ω—Ç –ø—Ä–æ–∫–æ–ª–∞" (—Å–∏–Ω–æ–Ω–∏–º—ã: "–ø—Ä–æ–∫–æ–ª–æ–ª –∫–æ–ª–µ—Å–æ", "—Å–ø—É—Å–∫–∞–µ—Ç –∫–æ–ª–µ—Å–æ", "—Ä–µ–º–æ–Ω—Ç —Ä–µ–∑–∏–Ω—ã", "–ø–æ—á–∏–Ω–∏—Ç—å –ø—Ä–æ–∫–æ–ª", "–∑–∞–ª–∞—Ç–∞—Ç—å –∫–æ–ª–µ—Å–æ", "2", "2 –≤–∞—Ä–∏–∞–Ω—Ç", "–≤–∞—Ä–∏–∞–Ω—Ç 2", "–≤—Ç–æ—Ä–æ–µ", "–≤—Ç–æ—Ä–æ–π").
                                        - "–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∂–≥—É—Ç–∞" (—Å–∏–Ω–æ–Ω–∏–º—ã: "–∂–≥—É—Ç", "–≤—Ä–µ–º–µ–Ω–Ω—ã–π —Ä–µ–º–æ–Ω—Ç", "1" –ø–æ—Å–ª–µ –≤—ã–±–æ—Ä–∞ "–†–µ–º–æ–Ω—Ç –ø—Ä–æ–∫–æ–ª–∞").
                                        - "–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∫–æ—Ä–¥–æ–≤–æ–≥–æ –ø–ª–∞—Å—Ç—ã—Ä—è" (—Å–∏–Ω–æ–Ω–∏–º—ã: "–ø–ª–∞—Å—Ç—ã—Ä—å", "–∫–æ—Ä–¥–æ–≤—ã–π –ø–ª–∞—Å—Ç—ã—Ä—å", "–ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–π —Ä–µ–º–æ–Ω—Ç", "2" –ø–æ—Å–ª–µ –≤—ã–±–æ—Ä–∞ "–†–µ–º–æ–Ω—Ç –ø—Ä–æ–∫–æ–ª–∞").
                                        - "–í—É–ª–∫–∞–Ω–∏–∑–∞—Ü–∏—è (–±–æ–∫–æ–≤–æ–π –ø–æ—Ä–µ–∑)" (—Å–∏–Ω–æ–Ω–∏–º—ã: "–±–æ–∫–æ–≤–æ–π –ø–æ—Ä–µ–∑", "–ø–æ—Ä–µ–∑ –Ω–∞ —à–∏–Ω–µ", "–≤—É–ª–∫–∞–Ω–∏–∑–∞—Ü–∏—è", "—Ä–µ–º–æ–Ω—Ç –±–æ–∫–æ–≤–æ–≥–æ –ø–æ—Ä–µ–∑–∞", "3" –ø–æ—Å–ª–µ –≤—ã–±–æ—Ä–∞ "–†–µ–º–æ–Ω—Ç –ø—Ä–æ–∫–æ–ª–∞").
                                    - "–ü—Ä–∞–≤–∫–∞ –¥–∏—Å–∫–∞" (—Å–∏–Ω–æ–Ω–∏–º—ã: "–ø—Ä–∞–≤–∫–∞", "–ø–æ—á–∏–Ω–∏—Ç—å –¥–∏—Å–∫", "–∏—Å–ø—Ä–∞–≤–∏—Ç—å –¥–∏—Å–∫", "–≤—ã–ø—Ä–∞–≤–∏—Ç—å –¥–∏—Å–∫", "—Ä–µ–º–æ–Ω—Ç –¥–∏—Å–∫–∞", "3", "3 –≤–∞—Ä–∏–∞–Ω—Ç", "–≤–∞—Ä–∏–∞–Ω—Ç 3", "—Ç—Ä–µ—Ç—å–µ", "—Ç—Ä–µ—Ç–∏–π").
                                    - "–î–æ—à–∏–ø–æ–≤–∫–∞" (—Å–∏–Ω–æ–Ω–∏–º—ã: "–¥–æ—à–∏–ø–æ–≤–∞—Ç—å", "–¥–æ–±–∞–≤–∏—Ç—å —à–∏–ø—ã", "–æ—à—ã–ø–∞–≤–∞—Ç—å", "–∑–∞—à–∏–ø–æ–≤–∞—Ç—å", "4", "4 –≤–∞—Ä–∏–∞–Ω—Ç", "–≤–∞—Ä–∏–∞–Ω—Ç 4", "—á–µ—Ç–≤–µ—Ä—Ç–æ–µ", "—á–µ—Ç–≤—ë—Ä—Ç—ã–π").

                                    –ï—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ—Ç–≤–µ—á–∞–µ—Ç "1", "2", "3" –∏–ª–∏ "4" –ø–æ—Å–ª–µ —Å–æ–æ–±—â–µ–Ω–∏—è "–ú—ã –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ–º —Å–ª–µ–¥—É—é—â–∏–µ —É—Å–ª—É–≥–∏: 1) –°–µ–∑–æ–Ω–Ω–∞—è –∑–∞–º–µ–Ω–∞ —à–∏–Ω 2) –†–µ–º–æ–Ω—Ç –ø—Ä–æ–∫–æ–ª–∞ 3) –ü—Ä–∞–≤–∫–∞ –¥–∏—Å–∫–∞ 4) –î–æ—à–∏–ø–æ–≤–∫–∞", –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∏—Ä—É–π —ç—Ç–æ –∫–∞–∫ –≤—ã–±–æ—Ä —É—Å–ª—É–≥–∏:
                                    - "1" ‚Üí "–°–µ–∑–æ–Ω–Ω–∞—è –∑–∞–º–µ–Ω–∞ —à–∏–Ω"
                                    - "2" ‚Üí "–†–µ–º–æ–Ω—Ç –ø—Ä–æ–∫–æ–ª–∞"
                                    - "3" ‚Üí "–ü—Ä–∞–≤–∫–∞ –¥–∏—Å–∫–∞"
                                    - "4" ‚Üí "–î–æ—à–∏–ø–æ–≤–∫–∞"

                                    –ï—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ—Ç–≤–µ—á–∞–µ—Ç "1", "2" –∏–ª–∏ "3" –ø–æ—Å–ª–µ —Å–æ–æ–±—â–µ–Ω–∏—è —Å –≤–∞—Ä–∏–∞–Ω—Ç–∞–º–∏ —Ä–µ–º–æ–Ω—Ç–∞ –ø—Ä–æ–∫–æ–ª–∞, –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∏—Ä—É–π —ç—Ç–æ –∫–∞–∫ –≤—ã–±–æ—Ä –ø–æ–¥—É—Å–ª—É–≥–∏:
                                    - "1" ‚Üí "–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∂–≥—É—Ç–∞"
                                    - "2" ‚Üí "–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∫–æ—Ä–¥–æ–≤–æ–≥–æ –ø–ª–∞—Å—Ç—ã—Ä—è"
                                    - "3" ‚Üí "–í—É–ª–∫–∞–Ω–∏–∑–∞—Ü–∏—è (–±–æ–∫–æ–≤–æ–π –ø–æ—Ä–µ–∑)"

                                    –û—Ç–≤–µ—á–∞–π –≤ –ø—Ä–æ—Å—Ç–æ–º —Ç–µ–∫—Å—Ç–æ–≤–æ–º —Ñ–æ—Ä–º–∞—Ç–µ –±–µ–∑ —Å–∏–º–≤–æ–ª–æ–≤ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è (–Ω–∞–ø—Ä–∏–º–µ—Ä, –±–µ–∑ ** –∏–ª–∏ *). –ò—Å–ø–æ–ª—å–∑—É–π –ø–µ—Ä–µ–Ω–æ—Å—ã —Å—Ç—Ä–æ–∫ (\n\n) –¥–ª—è —Ä–∞–∑–¥–µ–ª–µ–Ω–∏—è:
                                    - –î–ª—è "–°–µ–∑–æ–Ω–Ω–∞—è –∑–∞–º–µ–Ω–∞ —à–∏–Ω":
                                        - –ï—Å–ª–∏ —Ç–∏–ø –º–∞—à–∏–Ω—ã –∏ —Ä–∞–¥–∏—É—Å —É–∫–∞–∑–∞–Ω—ã: "–£—Å–ª—É–≥–∞: –°–µ–∑–æ–Ω–Ω–∞—è –∑–∞–º–µ–Ω–∞ —à–∏–Ω –Ω–∞ [—Ç–∏–ø –º–∞—à–∏–Ω—ã] –º–∞—à–∏–Ω—É [—Ä–∞–¥–∏—É—Å] ‚Äî [—Ü–µ–Ω–∞].\n–ù–∞ –∫–∞–∫–æ–µ –≤—Ä–µ–º—è –≤–∞—Å –∑–∞–ø–∏—Å–∞—Ç—å? üöó"
                                        - –ï—Å–ª–∏ —Ä–∞–¥–∏—É—Å –Ω–µ —É–∫–∞–∑–∞–Ω: "–£—Å–ª—É–≥–∞: –°–µ–∑–æ–Ω–Ω–∞—è –∑–∞–º–µ–Ω–∞ —à–∏–Ω –Ω–∞ [—Ç–∏–ø –º–∞—à–∏–Ω—ã] –º–∞—à–∏–Ω—É.\n–ö–∞–∫–æ–π —Ä–∞–¥–∏—É—Å –¥–∏—Å–∫–æ–≤ ([R14‚ÄìR22 –¥–ª—è –õ–µ–≥–∫–æ–≤–∞—è, R16‚ÄìR22 –¥–ª—è –í–Ω–µ–¥–æ—Ä–æ–∂–Ω–∏–∫])? ‚öôÔ∏è"
                                        - –ï—Å–ª–∏ –æ–±–∞ –Ω–µ —É–∫–∞–∑–∞–Ω—ã: "–£—Å–ª—É–≥–∞: –°–µ–∑–æ–Ω–Ω–∞—è –∑–∞–º–µ–Ω–∞ —à–∏–Ω.\n–£—Ç–æ—á–Ω–∏—Ç–µ —Ç–∏–ø –º–∞—à–∏–Ω—ã (–õ–µ–≥–∫–æ–≤–∞—è –∏–ª–∏ –í–Ω–µ–¥–æ—Ä–æ–∂–Ω–∏–∫) –∏ —Ä–∞–¥–∏—É—Å –¥–∏—Å–∫–æ–≤ (R14‚ÄìR22 –¥–ª—è –õ–µ–≥–∫–æ–≤–∞—è, R16‚ÄìR22 –¥–ª—è –í–Ω–µ–¥–æ—Ä–æ–∂–Ω–∏–∫). ‚ÑπÔ∏è"
                                    - –î–ª—è "–†–µ–º–æ–Ω—Ç –ø—Ä–æ–∫–æ–ª–∞":
                                        - –ï—Å–ª–∏ —É—Å–ª—É–≥–∞ —Ä–∞—Å–ø–æ–∑–Ω–∞–Ω–∞: "–£—Å–ª—É–≥–∞: –†–µ–º–æ–Ω—Ç –ø—Ä–æ–∫–æ–ª–∞.\n–ú—ã –ø—Ä–µ–¥–ª–∞–≥–∞–µ–º —Ç—Ä–∏ –≤–∞—Ä–∏–∞–Ω—Ç–∞:\n1) –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∂–≥—É—Ç–∞ ‚Äî –≤—Ä–µ–º–µ–Ω–Ω—ã–π —Ä–µ–º–æ–Ω—Ç, –±–µ–∑ –≥–∞—Ä–∞–Ω—Ç–∏–∏.\n2) –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∫–æ—Ä–¥–æ–≤–æ–≥–æ –ø–ª–∞—Å—Ç—ã—Ä—è ‚Äî –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–π —Ä–µ–º–æ–Ω—Ç, –≥–∞—Ä–∞–Ω—Ç–∏—è 1 –≥–æ–¥.\n3) –í—É–ª–∫–∞–Ω–∏–∑–∞—Ü–∏—è ‚Äî –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–π —Ä–µ–º–æ–Ω—Ç –±–æ–∫–æ–≤—ã—Ö –ø–æ—Ä–µ–∑–æ–≤.\n–ö–∞–∫–æ–π –≤–∞—Ä–∏–∞–Ω—Ç –≤–∞–º –ø–æ–¥—Ö–æ–¥–∏—Ç? –í—ã–±–µ—Ä–∏—Ç–µ 1, 2 –∏–ª–∏ 3. ‚ÑπÔ∏è"
                                    - –î–ª—è "–ü—Ä–∞–≤–∫–∞ –¥–∏—Å–∫–∞":
                                        - –ï—Å–ª–∏ —Ç–∏–ø –º–∞—à–∏–Ω—ã –∏ —Ä–∞–¥–∏—É—Å —É–∫–∞–∑–∞–Ω—ã: "–£—Å–ª—É–≥–∞: –ü—Ä–∞–≤–∫–∞ –¥–∏—Å–∫–∞ –Ω–∞ [—Ç–∏–ø –º–∞—à–∏–Ω—ã] –º–∞—à–∏–Ω—É [—Ä–∞–¥–∏—É—Å] ‚Äî [—Ü–µ–Ω–∞] (–±–µ–∑ —É—á–µ—Ç–∞ —à–∏–Ω–æ–º–æ–Ω—Ç–∞–∂–∞).\n–ù–∞ –∫–∞–∫–æ–µ –≤—Ä–µ–º—è –≤–∞—Å –∑–∞–ø–∏—Å–∞—Ç—å? üöó"
                                        - –ï—Å–ª–∏ —Ä–∞–¥–∏—É—Å –Ω–µ —É–∫–∞–∑–∞–Ω: "–£—Å–ª—É–≥–∞: –ü—Ä–∞–≤–∫–∞ –¥–∏—Å–∫–∞ –Ω–∞ [—Ç–∏–ø –º–∞—à–∏–Ω—ã] –º–∞—à–∏–Ω—É.\n–ö–∞–∫–æ–π —Ä–∞–¥–∏—É—Å –¥–∏—Å–∫–æ–≤ ([R14‚ÄìR22 –¥–ª—è –õ–µ–≥–∫–æ–≤–∞—è, R16‚ÄìR22 –¥–ª—è –í–Ω–µ–¥–æ—Ä–æ–∂–Ω–∏–∫])? ‚öôÔ∏è"
                                        - –ï—Å–ª–∏ –æ–±–∞ –Ω–µ —É–∫–∞–∑–∞–Ω—ã: "–£—Å–ª—É–≥–∞: –ü—Ä–∞–≤–∫–∞ –¥–∏—Å–∫–∞.\n–£—Ç–æ—á–Ω–∏—Ç–µ —Ç–∏–ø –º–∞—à–∏–Ω—ã (–õ–µ–≥–∫–æ–≤–∞—è –∏–ª–∏ –í–Ω–µ–¥–æ—Ä–æ–∂–Ω–∏–∫) –∏ —Ä–∞–¥–∏—É—Å –¥–∏—Å–∫–æ–≤ (R14‚ÄìR22 –¥–ª—è –õ–µ–≥–∫–æ–≤–∞—è, R16‚ÄìR22 –¥–ª—è –í–Ω–µ–¥–æ—Ä–æ–∂–Ω–∏–∫). ‚ÑπÔ∏è"
                                    - –î–ª—è "–î–æ—à–∏–ø–æ–≤–∫–∞":
                                        - –ï—Å–ª–∏ —Ç–∏–ø –º–∞—à–∏–Ω—ã –∏ —Ä–∞–¥–∏—É—Å —É–∫–∞–∑–∞–Ω—ã: "–£—Å–ª—É–≥–∞: –î–æ—à–∏–ø–æ–≤–∫–∞ –Ω–∞ [—Ç–∏–ø –º–∞—à–∏–Ω—ã] –º–∞—à–∏–Ω—É [—Ä–∞–¥–∏—É—Å] ‚Äî 20 —Ä—É–±–ª–µ–π –∑–∞ —à–∏–ø (—Ä–∞–¥–∏—É—Å —à–∏–ø–∞ 12 –º–º, –∑–∞–≤–æ–¥—Å–∫–∏–µ —à–∏–ø—ã 6-8 –º–º).\n–ù–∞ –∫–∞–∫–æ–µ –≤—Ä–µ–º—è –≤–∞—Å –∑–∞–ø–∏—Å–∞—Ç—å? üöó"
                                        - –ï—Å–ª–∏ —Ä–∞–¥–∏—É—Å –Ω–µ —É–∫–∞–∑–∞–Ω: "–£—Å–ª—É–≥–∞: –î–æ—à–∏–ø–æ–≤–∫–∞ –Ω–∞ [—Ç–∏–ø –º–∞—à–∏–Ω—ã] –º–∞—à–∏–Ω—É.\n–ö–∞–∫–æ–π —Ä–∞–¥–∏—É—Å –¥–∏—Å–∫–æ–≤ ([R14‚ÄìR22 –¥–ª—è –õ–µ–≥–∫–æ–≤–∞—è, R16‚ÄìR22 –¥–ª—è –í–Ω–µ–¥–æ—Ä–æ–∂–Ω–∏–∫])? ‚öôÔ∏è"
                                        - –ï—Å–ª–∏ –æ–±–∞ –Ω–µ —É–∫–∞–∑–∞–Ω—ã: "–£—Å–ª—É–≥–∞: –î–æ—à–∏–ø–æ–≤–∫–∞.\n–£—Ç–æ—á–Ω–∏—Ç–µ —Ç–∏–ø –º–∞—à–∏–Ω—ã (–õ–µ–≥–∫–æ–≤–∞—è –∏–ª–∏ –í–Ω–µ–¥–æ—Ä–æ–∂–Ω–∏–∫) –∏ —Ä–∞–¥–∏—É—Å –¥–∏—Å–∫–æ–≤ (R14‚ÄìR22 –¥–ª—è –õ–µ–≥–∫–æ–≤–∞—è, R16‚ÄìR22 –¥–ª—è –í–Ω–µ–¥–æ—Ä–æ–∂–Ω–∏–∫). ‚ÑπÔ∏è"
                                    - –ï—Å–ª–∏ –∑–∞–ø—Ä–æ—Å –Ω–µ —Ä–∞—Å–ø–æ–∑–Ω–∞–Ω: "–ú—ã –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ–º —Å–ª–µ–¥—É—é—â–∏–µ —É—Å–ª—É–≥–∏:\n1) –°–µ–∑–æ–Ω–Ω–∞—è –∑–∞–º–µ–Ω–∞ —à–∏–Ω\n2) –†–µ–º–æ–Ω—Ç –ø—Ä–æ–∫–æ–ª–∞\n3) –ü—Ä–∞–≤–∫–∞ –¥–∏—Å–∫–∞\n4) –î–æ—à–∏–ø–æ–≤–∫–∞\n–ß–µ–º –º–æ–≥—É –ø–æ–º–æ—á—å? ü§î"
                                    """
                    },
                    {
                        "role": "user",
                        "content": text
                    }
                ]
            )
        elif mode == "time":
            current_date = datetime.now().strftime("%d.%m.%Y")
            completion = await client.chat.completions.create(
                model="deepseek/deepseek-chat:free",
                messages=[
                    {
                        "role": "system",
                        "content": f"""–¢—ã ‚Äî –ò–ò, –∫–æ—Ç–æ—Ä—ã–π —Ä–∞—Å–ø–æ–∑–Ω–∞–µ—Ç –≤—Ä–µ–º—è –∏ –¥–∞—Ç—É –∏–∑ —Ç–µ–∫—Å—Ç–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è. –¢–µ–∫—É—â–∞—è –¥–∞—Ç–∞: {current_date}. –¢–≤–æ—è –∑–∞–¥–∞—á–∞ ‚Äî –∏–∑–≤–ª–µ—á—å –∏–∑ —Ç–µ–∫—Å—Ç–∞ –¥–∞—Ç—É –∏ –≤—Ä–µ–º—è, –∫–æ–≥–¥–∞ –∫–ª–∏–µ–Ω—Ç —Ö–æ—á–µ—Ç –∑–∞–ø–∏—Å–∞—Ç—å—Å—è, –∏ –≤–µ—Ä–Ω—É—Ç—å –∏—Ö —Å—Ç—Ä–æ–≥–æ –≤ —Ñ–æ—Ä–º–∞—Ç–µ JSON: {{"date": "–î–î.–ú–ú.–ì–ì–ì–ì", "time": "–ß–ß:–ú–ú"}}. 

                        –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–π –µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ —Ñ—Ä–∞–∑—ã: "—Å–µ–≥–æ–¥–Ω—è –≤ 14", "–∑–∞–≤—Ç—Ä–∞ –Ω–∞ 12", "19 —á–∏—Å–ª–∞ –≤ 15:00", "–≤ 16", "–ø–æ—Å–ª–µ–∑–∞–≤—Ç—Ä–∞ –≤ 13:30", "–¥–∞–≤–∞–π –∫ 15", "–Ω–∞ 12 —á–∞—Å–æ–≤", "–≤ 5 –≤–µ—á–µ—Ä–∞". 
                        - –ï—Å–ª–∏ –¥–µ–Ω—å –Ω–µ —É–∫–∞–∑–∞–Ω, –∏—Å–ø–æ–ª—å–∑—É–π "—Å–µ–≥–æ–¥–Ω—è" ({current_date}).
                        - –ï—Å–ª–∏ –º–µ—Å—è—Ü –Ω–µ —É–∫–∞–∑–∞–Ω, –∏—Å–ø–æ–ª—å–∑—É–π —Ç–µ–∫—É—â–∏–π –º–µ—Å—è—Ü.
                        - –ï—Å–ª–∏ –≥–æ–¥ –Ω–µ —É–∫–∞–∑–∞–Ω, –∏—Å–ø–æ–ª—å–∑—É–π —Ç–µ–∫—É—â–∏–π –≥–æ–¥.
                        - –ï—Å–ª–∏ —á–∞—Å—ã –±–µ–∑ –º–∏–Ω—É—Ç, –¥–æ–±–∞–≤–ª—è–π ":00".
                        - –ï—Å–ª–∏ –≤—Ä–µ–º—è –∏–ª–∏ –¥–∞—Ç–∞ –Ω–µ —Ä–∞—Å–ø–æ–∑–Ω–∞–Ω—ã, –≤–µ—Ä–Ω–∏ {{"error": "–ù–µ —É–¥–∞–ª–æ—Å—å —Ä–∞—Å–ø–æ–∑–Ω–∞—Ç—å –≤—Ä–µ–º—è"}}.

                        –í—Å–µ–≥–¥–∞ –≤–æ–∑–≤—Ä–∞—â–∞–π —Ç–æ–ª—å–∫–æ JSON, –Ω–∏–∫–∞–∫–∏—Ö –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö –ø–æ—è—Å–Ω–µ–Ω–∏–π."""
                    },
                    {
                        "role": "user",
                        "content": text
                    }
                ]
            )
        elif mode == "params":
            completion = await client.chat.completions.create(
                model="deepseek/deepseek-chat:free",
                messages=[
                    {
                        "role": "system",
                        "content": """–¢—ã ‚Äî –ò–ò, –∫–æ—Ç–æ—Ä—ã–π —Ä–∞—Å–ø–æ–∑–Ω–∞–µ—Ç —Ç–∏–ø –º–∞—à–∏–Ω—ã –∏ —Ä–∞–¥–∏—É—Å –¥–∏—Å–∫–æ–≤ –∏–∑ —Ç–µ–∫—Å—Ç–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è. –ü—Ä–∞–π—Å-–ª–∏—Å—Ç:
                                –õ–µ–≥–∫–æ–≤–∞—è: R14, R15, R16, R17, R18, R19, R20, R21, R22
                                –í–Ω–µ–¥–æ—Ä–æ–∂–Ω–∏–∫: R16, R17, R18, R19, R20, R21, R22

                                –ò–∑–≤–ª–µ–∫–∏ –∏–∑ —Ç–µ–∫—Å—Ç–∞:
                                - –¢–∏–ø –º–∞—à–∏–Ω—ã ("–õ–µ–≥–∫–æ–≤–∞—è" –∏–ª–∏ "–í–Ω–µ–¥–æ—Ä–æ–∂–Ω–∏–∫").
                                - –†–∞–¥–∏—É—Å –¥–∏—Å–∫–æ–≤ (R14‚ÄìR22 –¥–ª—è –õ–µ–≥–∫–æ–≤–∞—è, R16‚ÄìR22 –¥–ª—è –í–Ω–µ–¥–æ—Ä–æ–∂–Ω–∏–∫).

                                –í–µ—Ä–Ω–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤ —Ñ–æ—Ä–º–∞—Ç–µ JSON: {"car_type": "<—Ç–∏–ø>", "radius": "<—Ä–∞–¥–∏—É—Å>"}
                                - –ï—Å–ª–∏ —Ç–∏–ø –º–∞—à–∏–Ω—ã —É–∫–∞–∑–∞–Ω –±–µ–∑ —Ä–∞–¥–∏—É—Å–∞, –≤–µ—Ä–Ω–∏ "radius": null.
                                - –ï—Å–ª–∏ —Ä–∞–¥–∏—É—Å —É–∫–∞–∑–∞–Ω –±–µ–∑ —Ç–∏–ø–∞ –º–∞—à–∏–Ω—ã, –≤–µ—Ä–Ω–∏ "car_type": null.
                                - –†–∞–¥–∏—É—Å –º–æ–∂–µ—Ç –±—ã—Ç—å —É–∫–∞–∑–∞–Ω –∫–∞–∫ "R14", "r14", "14", "—Ä–∞–¥–∏—É—Å 14" –∏ —Ç.–¥. –ü—Ä–µ–æ–±—Ä–∞–∑—É–π –≤—Å–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã –≤ —Ñ–æ—Ä–º–∞—Ç "RXX" (–Ω–∞–ø—Ä–∏–º–µ—Ä, "14" ‚Üí "R14", "r15" ‚Üí "R15").
                                - –ï—Å–ª–∏ —Ä–∞–¥–∏—É—Å –≤–Ω–µ –¥–∏–∞–ø–∞–∑–æ–Ω–∞, –≤–µ—Ä–Ω–∏ {"error": "–ù–µ–≤–µ—Ä–Ω—ã–π —Ä–∞–¥–∏—É—Å –¥–∏—Å–∫–æ–≤. –î–æ—Å—Ç—É–ø–Ω—ã: R14‚ÄìR22 –¥–ª—è –õ–µ–≥–∫–æ–≤–∞—è, R16‚ÄìR22 –¥–ª—è –í–Ω–µ–¥–æ—Ä–æ–∂–Ω–∏–∫."}
                                - –ï—Å–ª–∏ —Ç–∏–ø –º–∞—à–∏–Ω—ã –Ω–µ "–õ–µ–≥–∫–æ–≤–∞—è" –∏–ª–∏ "–í–Ω–µ–¥–æ—Ä–æ–∂–Ω–∏–∫", –≤–µ—Ä–Ω–∏ {"error": "–£–∫–∞–∂–∏—Ç–µ —Ç–∏–ø –º–∞—à–∏–Ω—ã: –õ–µ–≥–∫–æ–≤–∞—è –∏–ª–∏ –í–Ω–µ–¥–æ—Ä–æ–∂–Ω–∏–∫."}
                                - –ï—Å–ª–∏ —Ç–µ–∫—Å—Ç –ø—É—Å—Ç–æ–π –∏–ª–∏ –Ω–µ —Å–æ–¥–µ—Ä–∂–∏—Ç —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–µ–º—ã—Ö –¥–∞–Ω–Ω—ã—Ö, –≤–µ—Ä–Ω–∏ {"car_type": null, "radius": null}.

                                –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–π –≤–∞—Ä–∏–∞–Ω—Ç—ã: 
                                - –î–ª—è —Ç–∏–ø–∞ –º–∞—à–∏–Ω—ã: "–ª–µ–≥–∫–æ–≤–∞—è", "–õ–µ–≥–∫–æ–≤–∞—è", "–ª–µ–≥–∫–æ–≤—É—à–∫–∞", "–≤–Ω–µ–¥–æ—Ä–æ–∂–Ω–∏–∫", "–í–Ω–µ–¥–æ—Ä–æ–∂–Ω–∏–∫", "–¥–∂–∏–ø", "–≤–Ω–µ–¥–æ—Ä", "–≤–Ω–µ–¥", "–ª–µ–≥–∫–æ–≤", "–ª–µ–≥–∫".
                                - –î–ª—è —Ä–∞–¥–∏—É—Å–∞: "R14", "r14", "14", "—Ä–∞–¥–∏—É—Å 14", "R 14", "r 14" –∏ –∞–Ω–∞–ª–æ–≥–∏—á–Ω—ã–µ –∫–æ–º–±–∏–Ω–∞—Ü–∏–∏ –¥–ª—è –≤—Å–µ—Ö –∑–Ω–∞—á–µ–Ω–∏–π R14‚ÄìR22.

                                –í–æ–∑–≤—Ä–∞—â–∞–π –¢–û–õ–¨–ö–û JSON, –Ω–∏–∫–∞–∫–∏—Ö –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö –ø–æ—è—Å–Ω–µ–Ω–∏–π –∏–ª–∏ —Ç–µ–∫—Å—Ç–∞."""
                    },
                    {
                        "role": "user",
                        "content": text
                    }
                ]
            )

        result = completion.choices[0].message.content
        return result

    except Exception as e:
        return None